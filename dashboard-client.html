<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vaulty — Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Unbounded:wght@400;700;800;900&family=Sora:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0e0b14;
            --card: #16131e;
            --card-hover: #1c1826;
            --border: #231f2e;
            --text: #f0edf5;
            --dim: #8b84a0;
            --muted: #524d63;
            --pink: #f43f8e;
            --pink-dim: rgba(244,63,142,0.1);
            --pink-glow: rgba(244,63,142,0.25);
            --purple: #8b5cf6;
            --purple-dim: rgba(139,92,246,0.1);
            --grad: linear-gradient(135deg, #f43f8e, #8b5cf6);
            --input-bg: #1a1622;
            --sidebar-w: 260px;
            --topbar-h: 64px;
            --danger: #ef4444;
            --danger-dim: rgba(239,68,68,0.1);
            --success: #22c55e;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg);
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            overflow: hidden;
            height: 100vh;
        }

        /* ══════ TOPBAR ══════ */
        .topbar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 100;
            height: var(--topbar-h);
            background: rgba(14,11,20,0.92);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 1.5rem;
        }

        .topbar-logo {
            display: flex; align-items: center; gap: 12px;
            text-decoration: none; color: var(--text);
        }
        .topbar-logo-icon {
            width: 38px; height: 38px;
            background: linear-gradient(135deg, rgba(244,63,142,0.1), rgba(139,92,246,0.06));
            border: 1px solid rgba(244,63,142,0.2);
            border-radius: 11px;
            display: flex; align-items: center; justify-content: center;
        }
        .topbar-logo-vault {
            width: 22px; height: 22px;
            border: 2px solid var(--pink);
            border-radius: 50%;
            position: relative;
            display: flex; align-items: center; justify-content: center;
        }
        .topbar-logo-vault::before {
            content: '';
            width: 4px; height: 4px;
            background: var(--pink);
            border-radius: 50%;
            position: absolute;
        }
        .topbar-logo-vault .sp {
            position: absolute;
            width: 1.5px; height: 7px;
            background: var(--pink);
            border-radius: 1px;
        }
        .topbar-logo-vault .sp:nth-child(1) { transform: rotate(0deg); }
        .topbar-logo-vault .sp:nth-child(2) { transform: rotate(90deg); }
        .topbar-logo-vault .sp:nth-child(3) { transform: rotate(45deg); }
        .topbar-logo-vault .sp:nth-child(4) { transform: rotate(135deg); }
        .topbar-logo-text {
            font-family: 'Unbounded', sans-serif;
            font-size: 1.1rem; font-weight: 900;
            color: #fff; letter-spacing: 1px;
        }

        .topbar-right {
            display: flex; align-items: center; gap: 1rem;
        }

        .credit-pill {
            display: flex; align-items: center; gap: 8px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.45rem 1rem;
            font-size: 0.82rem; font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .credit-pill:hover {
            border-color: var(--muted);
            background: var(--card-hover);
        }
        .credit-pill svg { width: 16px; height: 16px; }
        .credit-pill .credit-amt {
            background: var(--grad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .user-menu {
            position: relative;
        }
        .user-avatar-btn {
            width: 38px; height: 38px;
            border-radius: 50%;
            background: var(--grad);
            border: none;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-family: 'Unbounded', sans-serif;
            font-weight: 900; font-size: 0.8rem;
            color: #fff;
            transition: all 0.2s;
        }
        .user-avatar-btn:hover {
            box-shadow: 0 0 20px var(--pink-glow);
            transform: scale(1.05);
        }

        .user-dropdown {
            position: absolute; top: calc(100% + 8px); right: 0;
            width: 220px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.5rem;
            display: none;
            box-shadow: 0 16px 48px rgba(0,0,0,0.4);
            z-index: 200;
        }
        .user-dropdown.open { display: block; }

        .user-dropdown-header {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 0.25rem;
        }
        .user-dropdown-header .name {
            font-weight: 800; font-size: 0.9rem;
        }
        .user-dropdown-header .handle {
            font-size: 0.78rem; color: var(--dim);
        }
        .user-dropdown-item {
            display: flex; align-items: center; gap: 10px;
            padding: 0.6rem 0.75rem;
            border-radius: 10px;
            font-size: 0.82rem; font-weight: 600;
            color: var(--dim);
            cursor: pointer;
            transition: all 0.15s;
            border: none; background: none; width: 100%;
            font-family: inherit;
            text-align: left;
        }
        .user-dropdown-item:hover {
            background: var(--input-bg);
            color: var(--text);
        }
        .user-dropdown-item svg { width: 16px; height: 16px; opacity: 0.6; }
        .user-dropdown-item.danger { color: var(--danger); }
        .user-dropdown-item.danger:hover { background: var(--danger-dim); }
        .user-dropdown-sep {
            height: 1px; background: var(--border); margin: 0.25rem 0.5rem;
        }

        /* ══════ SIDEBAR ══════ */
        .sidebar {
            position: fixed; top: var(--topbar-h); left: 0; bottom: 0;
            width: var(--sidebar-w);
            background: var(--card);
            border-right: 1px solid var(--border);
            padding: 1.25rem 0.75rem;
            display: flex; flex-direction: column;
            z-index: 50;
        }

        .sidebar-nav { display: flex; flex-direction: column; gap: 4px; flex: 1; }

        .sidebar-item {
            display: flex; align-items: center; gap: 12px;
            padding: 0.7rem 0.85rem;
            border-radius: 12px;
            font-size: 0.88rem; font-weight: 700;
            color: var(--dim);
            cursor: pointer;
            transition: all 0.15s;
            border: none; background: none;
            font-family: inherit; width: 100%;
            text-align: left;
            position: relative;
        }
        .sidebar-item:hover {
            background: var(--input-bg);
            color: var(--text);
        }
        .sidebar-item.active {
            background: var(--pink-dim);
            color: var(--pink);
        }
        .sidebar-item.active svg { color: var(--pink); }
        .sidebar-item svg {
            width: 20px; height: 20px;
            color: var(--muted);
            flex-shrink: 0;
            transition: color 0.15s;
        }
        .sidebar-item:hover svg { color: var(--dim); }
        .sidebar-item .sidebar-badge {
            margin-left: auto;
            background: var(--grad);
            color: #fff;
            font-size: 0.68rem;
            font-weight: 800;
            padding: 2px 8px;
            border-radius: 20px;
            line-height: 1.4;
        }

        .sidebar-section-label {
            font-size: 0.65rem;
            font-weight: 700;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 1.25rem 0.85rem 0.5rem;
        }

        .sidebar-footer {
            border-top: 1px solid var(--border);
            padding-top: 0.75rem;
            margin-top: 0.5rem;
        }

        /* ══════ MAIN CONTENT ══════ */
        .main {
            margin-left: var(--sidebar-w);
            margin-top: var(--topbar-h);
            height: calc(100vh - var(--topbar-h));
            overflow-y: auto;
            padding: 2rem;
        }
        .main::-webkit-scrollbar { width: 6px; }
        .main::-webkit-scrollbar-track { background: transparent; }
        .main::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        .main::-webkit-scrollbar-thumb:hover { background: var(--muted); }

        .view { display: none; }
        .view.active { display: block; }

        .view-header {
            margin-bottom: 2rem;
        }
        .view-header h1 {
            font-family: 'Sora', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 0.3rem;
        }
        .view-header p {
            color: var(--dim);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* ══════ SEARCH VIEW ══════ */
        .search-container {
            max-width: 640px;
            margin: 0 auto;
            padding-top: 6vh;
            text-align: center;
        }
        .search-title {
            font-family: 'Unbounded', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }
        .search-title .grad-text {
            background: var(--grad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .search-subtitle {
            color: var(--dim);
            font-size: 0.95rem;
            margin-bottom: 2.5rem;
            line-height: 1.6;
        }
        .search-bar-wrap {
            position: relative;
            margin-bottom: 1rem;
        }
        .search-bar {
            width: 100%;
            padding: 1rem 1.2rem 1rem 3.2rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            color: var(--text);
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            outline: none;
            transition: all 0.25s;
        }
        .search-bar:focus {
            border-color: var(--pink);
            box-shadow: 0 0 0 3px var(--pink-dim);
        }
        .search-bar::placeholder { color: var(--muted); }
        .search-bar-icon {
            position: absolute;
            left: 1.1rem; top: 50%; transform: translateY(-50%);
            width: 20px; height: 20px;
            color: var(--muted);
            pointer-events: none;
        }
        .search-hint {
            font-size: 0.8rem;
            color: var(--muted);
        }

        .search-result {
            margin-top: 1.5rem;
            display: none;
        }
        .search-result.show { display: block; }

        .search-result-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.25rem;
            display: flex; align-items: center; gap: 1rem;
            text-align: left;
            transition: all 0.2s;
            cursor: pointer;
        }
        .search-result-card:hover {
            border-color: var(--muted);
            background: var(--card-hover);
        }
        .search-result-avatar {
            width: 56px; height: 56px;
            border-radius: 50%;
            background: var(--grad);
            display: flex; align-items: center; justify-content: center;
            font-family: 'Unbounded', sans-serif;
            font-weight: 900; font-size: 1.1rem; color: #fff;
            flex-shrink: 0;
        }
        .search-result-info { flex: 1; }
        .search-result-info .name {
            font-weight: 800; font-size: 1rem; margin-bottom: 2px;
        }
        .search-result-info .handle {
            font-size: 0.82rem; color: var(--dim);
        }
        .search-result-action {
            padding: 0.55rem 1.2rem;
            background: var(--grad);
            border: none; border-radius: 12px;
            color: #fff; font-family: inherit;
            font-size: 0.82rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .search-result-action:hover {
            box-shadow: 0 4px 20px var(--pink-glow);
            transform: translateY(-1px);
        }

        .search-empty {
            margin-top: 2rem;
            padding: 2rem;
            text-align: center;
            color: var(--muted);
            font-size: 0.88rem;
            display: none;
        }
        .search-empty.show { display: block; }
        .search-empty svg {
            width: 48px; height: 48px;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        /* ══════ SUBSCRIPTIONS VIEW ══════ */
        .subs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }
        .sub-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.5rem;
            transition: all 0.2s;
        }
        .sub-card:hover {
            border-color: var(--muted);
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }
        .sub-card-top {
            display: flex; align-items: center; gap: 1rem;
            margin-bottom: 1.25rem;
        }
        .sub-avatar {
            width: 52px; height: 52px;
            border-radius: 50%;
            background: var(--grad);
            display: flex; align-items: center; justify-content: center;
            font-family: 'Unbounded', sans-serif;
            font-weight: 900; font-size: 1rem; color: #fff;
            flex-shrink: 0;
        }
        .sub-info .sub-name {
            font-weight: 800; font-size: 0.95rem;
        }
        .sub-info .sub-handle {
            font-size: 0.8rem; color: var(--dim);
        }
        .sub-card-details {
            display: flex; justify-content: space-between; align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        .sub-tier {
            display: inline-flex; align-items: center; gap: 5px;
            font-size: 0.72rem; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.06em;
            padding: 4px 10px;
            border-radius: 8px;
        }
        .sub-tier.basic {
            background: var(--purple-dim);
            color: var(--purple);
        }
        .sub-tier.premium {
            background: var(--pink-dim);
            color: var(--pink);
        }
        .sub-tier.vip {
            background: rgba(245,197,66,0.1);
            color: #f5c542;
        }
        .sub-renewal {
            font-size: 0.78rem; color: var(--dim);
        }
        .sub-renewal span { color: var(--text); font-weight: 700; }

        .subs-empty {
            text-align: center;
            padding: 4rem 2rem;
        }
        .subs-empty-icon {
            width: 80px; height: 80px;
            margin: 0 auto 1.5rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }
        .subs-empty-icon svg {
            width: 36px; height: 36px; color: var(--muted);
        }
        .subs-empty h3 {
            font-family: 'Sora', sans-serif;
            font-weight: 700; font-size: 1.1rem;
            margin-bottom: 0.4rem;
        }
        .subs-empty p {
            color: var(--dim); font-size: 0.88rem; margin-bottom: 1.5rem;
        }
        .subs-empty-btn {
            padding: 0.65rem 1.5rem;
            background: var(--grad);
            border: none; border-radius: 12px;
            color: #fff; font-family: inherit;
            font-size: 0.88rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .subs-empty-btn:hover {
            box-shadow: 0 4px 20px var(--pink-glow);
            transform: translateY(-1px);
        }

        /* ══════ CREDITS VIEW ══════ */
        .credits-top {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.25rem;
            margin-bottom: 2rem;
        }
        .balance-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }
        .balance-card::before {
            content: '';
            position: absolute;
            top: -40px; right: -40px;
            width: 150px; height: 150px;
            background: radial-gradient(circle, var(--pink-dim) 0%, transparent 70%);
            pointer-events: none;
        }
        .balance-label {
            font-size: 0.78rem; font-weight: 700;
            color: var(--dim); text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 0.75rem;
        }
        .balance-number {
            font-family: 'Unbounded', sans-serif;
            font-size: 2.8rem;
            font-weight: 900;
            background: var(--grad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        .balance-usd {
            font-size: 0.88rem; color: var(--dim);
        }
        .balance-usd span { color: var(--text); font-weight: 700; }

        .balance-stats-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            display: flex; flex-direction: column; justify-content: center;
        }
        .balance-stat {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.75rem 0;
        }
        .balance-stat:not(:last-child) {
            border-bottom: 1px solid var(--border);
        }
        .balance-stat-label {
            font-size: 0.82rem; color: var(--dim); font-weight: 600;
        }
        .balance-stat-value {
            font-weight: 800; font-size: 0.9rem;
        }
        .balance-stat-value.green { color: var(--success); }

        .credits-section-title {
            font-family: 'Sora', sans-serif;
            font-size: 1.1rem; font-weight: 800;
            margin-bottom: 1rem;
        }

        .credit-packages {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2.5rem;
        }
        .credit-pkg {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .credit-pkg:hover {
            border-color: var(--pink);
            transform: translateY(-3px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .credit-pkg.popular {
            border-color: var(--pink);
        }
        .credit-pkg-badge {
            position: absolute;
            top: -10px; left: 50%; transform: translateX(-50%);
            background: var(--grad);
            color: #fff;
            font-size: 0.62rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            padding: 3px 12px;
            border-radius: 20px;
        }
        .credit-pkg-amount {
            font-family: 'Unbounded', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 0.2rem;
        }
        .credit-pkg-label {
            font-size: 0.78rem; color: var(--dim); font-weight: 600;
            margin-bottom: 1rem;
        }
        .credit-pkg-price {
            font-size: 1.15rem; font-weight: 800;
            margin-bottom: 0.3rem;
        }
        .credit-pkg-per {
            font-size: 0.72rem; color: var(--muted);
        }
        .credit-pkg-btn {
            margin-top: 1rem;
            width: 100%;
            padding: 0.6rem;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-family: inherit;
            font-size: 0.82rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .credit-pkg:hover .credit-pkg-btn {
            background: var(--grad);
            border-color: transparent;
        }

        .tx-table-wrap {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
        }
        .tx-table {
            width: 100%;
            border-collapse: collapse;
        }
        .tx-table th {
            text-align: left;
            padding: 0.85rem 1.25rem;
            font-size: 0.72rem;
            font-weight: 700;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            border-bottom: 1px solid var(--border);
            background: var(--input-bg);
        }
        .tx-table td {
            padding: 0.85rem 1.25rem;
            font-size: 0.85rem;
            font-weight: 600;
            border-bottom: 1px solid var(--border);
        }
        .tx-table tr:last-child td { border-bottom: none; }
        .tx-table tr:hover td { background: rgba(26,22,34,0.5); }
        .tx-type {
            display: inline-flex; align-items: center; gap: 6px;
        }
        .tx-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
        }
        .tx-dot.purchase { background: var(--success); }
        .tx-dot.subscription { background: var(--pink); }
        .tx-dot.tip { background: var(--purple); }
        .tx-amount.positive { color: var(--success); }
        .tx-amount.negative { color: var(--pink); }

        /* ══════ SETTINGS VIEW ══════ */
        .settings-sections { max-width: 640px; }

        .settings-section {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.75rem;
            margin-bottom: 1.25rem;
        }
        .settings-section-title {
            font-family: 'Sora', sans-serif;
            font-size: 1rem; font-weight: 800;
            margin-bottom: 0.3rem;
        }
        .settings-section-desc {
            font-size: 0.82rem; color: var(--dim);
            margin-bottom: 1.5rem;
        }

        .settings-avatar-row {
            display: flex; align-items: center; gap: 1.25rem;
            margin-bottom: 1.5rem;
        }
        .settings-avatar {
            width: 72px; height: 72px;
            border-radius: 50%;
            background: var(--grad);
            display: flex; align-items: center; justify-content: center;
            font-family: 'Unbounded', sans-serif;
            font-weight: 900; font-size: 1.4rem; color: #fff;
            flex-shrink: 0;
        }
        .settings-avatar-actions { display: flex; flex-direction: column; gap: 6px; }
        .settings-avatar-upload {
            padding: 0.45rem 1rem;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: inherit; font-size: 0.78rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .settings-avatar-upload:hover {
            border-color: var(--muted);
            background: var(--card-hover);
        }
        .settings-avatar-hint {
            font-size: 0.72rem; color: var(--muted);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .form-group { margin-bottom: 1rem; }
        .form-group label {
            display: block; font-size: 0.72rem; font-weight: 700;
            color: var(--dim); margin-bottom: 0.4rem;
            text-transform: uppercase; letter-spacing: 0.06em;
        }
        .form-input {
            width: 100%; padding: 0.7rem 1rem;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: inherit; font-size: 0.88rem; font-weight: 600;
            outline: none; transition: all 0.2s;
        }
        .form-input:focus { border-color: var(--pink); box-shadow: 0 0 0 3px var(--pink-dim); }
        .form-input::placeholder { color: var(--muted); }
        .form-input:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-save {
            padding: 0.65rem 1.5rem;
            background: var(--grad);
            border: none; border-radius: 12px;
            color: #fff; font-family: inherit;
            font-size: 0.85rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .btn-save:hover {
            box-shadow: 0 4px 20px var(--pink-glow);
            transform: translateY(-1px);
        }
        .btn-secondary {
            padding: 0.65rem 1.5rem;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-family: inherit;
            font-size: 0.85rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .btn-secondary:hover {
            border-color: var(--muted);
            background: var(--card-hover);
        }

        .toggle-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.75rem 0;
        }
        .toggle-row:not(:last-child) {
            border-bottom: 1px solid var(--border);
        }
        .toggle-label {
            font-size: 0.88rem; font-weight: 700;
        }
        .toggle-desc {
            font-size: 0.78rem; color: var(--dim); margin-top: 2px;
        }
        .toggle-switch {
            position: relative;
            width: 44px; height: 24px;
            cursor: pointer;
        }
        .toggle-switch input {
            opacity: 0; width: 0; height: 0;
        }
        .toggle-slider {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: var(--border);
            border-radius: 24px;
            transition: 0.25s;
        }
        .toggle-slider::before {
            content: '';
            position: absolute;
            left: 3px; bottom: 3px;
            width: 18px; height: 18px;
            background: var(--text);
            border-radius: 50%;
            transition: 0.25s;
        }
        .toggle-switch input:checked + .toggle-slider {
            background: var(--pink);
        }
        .toggle-switch input:checked + .toggle-slider::before {
            transform: translateX(20px);
        }

        .danger-zone {
            border-color: rgba(239,68,68,0.2);
        }
        .danger-zone .settings-section-title { color: var(--danger); }
        .btn-danger {
            padding: 0.65rem 1.5rem;
            background: var(--danger-dim);
            border: 1px solid rgba(239,68,68,0.2);
            border-radius: 12px;
            color: var(--danger);
            font-family: inherit;
            font-size: 0.85rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s;
        }
        .btn-danger:hover {
            background: rgba(239,68,68,0.15);
            border-color: var(--danger);
        }

        /* ══════ TOAST ══════ */
        .toast {
            position: fixed; bottom: 2rem; right: 2rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1rem 1.5rem;
            display: flex; align-items: center; gap: 10px;
            font-size: 0.88rem; font-weight: 700;
            box-shadow: 0 16px 48px rgba(0,0,0,0.4);
            transform: translateY(120%);
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 300;
        }
        .toast.show { transform: translateY(0); }
        .toast-icon {
            width: 20px; height: 20px;
            color: var(--success);
        }

        /* ══════ RESPONSIVE ══════ */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main { margin-left: 0; }
            .credits-top { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; }
            .credit-packages { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 480px) {
            .main { padding: 1.25rem; }
            .search-title { font-size: 1.3rem; }
            .credit-packages { grid-template-columns: 1fr; }
            .subs-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- ══════ TOPBAR ══════ -->
<div class="topbar">
    <a href="index.html" class="topbar-logo">
        <div class="topbar-logo-icon">
            <div class="topbar-logo-vault">
                <div class="sp"></div><div class="sp"></div><div class="sp"></div><div class="sp"></div>
            </div>
        </div>
        <span class="topbar-logo-text">Vaulty</span>
    </a>

    <div class="topbar-right">
        <div class="credit-pill" onclick="switchView('credits')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 100 4h4a2 2 0 110 4H8"/><path d="M12 6v2m0 8v2"/></svg>
            <span class="credit-amt" id="topbar-credits">247</span>
            <span style="color:var(--dim)">credits</span>
        </div>

        <div class="user-menu">
            <button class="user-avatar-btn" id="avatar-btn" onclick="toggleDropdown()">JD</button>
            <div class="user-dropdown" id="user-dropdown">
                <div class="user-dropdown-header">
                    <div class="name">John Doe</div>
                    <div class="handle">@johndoe</div>
                </div>
                <button class="user-dropdown-item" onclick="switchView('settings'); closeDropdown();">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
                    Settings
                </button>
                <button class="user-dropdown-item" onclick="switchView('credits'); closeDropdown();">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 100 4h4a2 2 0 110 4H8"/><path d="M12 6v2m0 8v2"/></svg>
                    Buy Credits
                </button>
                <div class="user-dropdown-sep"></div>
                <button class="user-dropdown-item danger" onclick="closeDropdown();">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    Log out
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ══════ SIDEBAR ══════ -->
<div class="sidebar">
    <div class="sidebar-nav">
        <div class="sidebar-section-label">Menu</div>

        <button class="sidebar-item active" data-view="search" onclick="switchView('search')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            Search
        </button>

        <button class="sidebar-item" data-view="subscriptions" onclick="switchView('subscriptions')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
            My Subscriptions
            <span class="sidebar-badge">3</span>
        </button>

        <button class="sidebar-item" data-view="credits" onclick="switchView('credits')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 100 4h4a2 2 0 110 4H8"/><path d="M12 6v2m0 8v2"/></svg>
            Credits
        </button>

        <div class="sidebar-section-label">Account</div>

        <button class="sidebar-item" data-view="settings" onclick="switchView('settings')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
            Settings
        </button>
    </div>

    <div class="sidebar-footer">
        <button class="sidebar-item" style="color: var(--danger);" onclick="return false;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--danger);"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            Log out
        </button>
    </div>
</div>

<!-- ══════ MAIN CONTENT ══════ -->
<div class="main">

    <!-- ── SEARCH VIEW ── -->
    <div class="view active" id="view-search">
        <div class="search-container">
            <h1 class="search-title">Find <span class="grad-text">Creators</span></h1>
            <p class="search-subtitle">Discover your favorite creators by searching their @username or pasting their profile link. No browsing, no algorithms -- just direct connections.</p>

            <div class="search-bar-wrap">
                <svg class="search-bar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                <input type="text" class="search-bar" id="search-input" placeholder="Search by @username or paste a link" autocomplete="off">
            </div>
            <p class="search-hint">Try searching <strong style="color:var(--pink); cursor:pointer;" onclick="document.getElementById('search-input').value='@alexcreates'; handleSearch();">@alexcreates</strong> or <strong style="color:var(--purple); cursor:pointer;" onclick="document.getElementById('search-input').value='@sophieart'; handleSearch();">@sophieart</strong></p>

            <div class="search-result" id="search-result"></div>
            <div class="search-empty" id="search-empty">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                <p>No creators found for that username. Check the spelling and try again.</p>
            </div>
        </div>
    </div>

    <!-- ── SUBSCRIPTIONS VIEW ── -->
    <div class="view" id="view-subscriptions">
        <div class="view-header">
            <h1>My Subscriptions</h1>
            <p>Manage your active subscriptions and see renewal dates.</p>
        </div>

        <div class="subs-grid" id="subs-grid">
            <!-- Populated by JS -->
        </div>

        <div class="subs-empty" id="subs-empty" style="display:none;">
            <div class="subs-empty-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
            </div>
            <h3>No active subscriptions</h3>
            <p>Search for creators and subscribe to their content.</p>
            <button class="subs-empty-btn" onclick="switchView('search')">Find Creators</button>
        </div>
    </div>

    <!-- ── CREDITS VIEW ── -->
    <div class="view" id="view-credits">
        <div class="view-header">
            <h1>Credits</h1>
            <p>Buy credits to subscribe to creators and unlock exclusive content.</p>
        </div>

        <div class="credits-top">
            <div class="balance-card">
                <div class="balance-label">Your Balance</div>
                <div class="balance-number" id="balance-display">247</div>
                <div class="balance-usd">Estimated value: <span>~$22.48</span></div>
            </div>
            <div class="balance-stats-card">
                <div class="balance-stat">
                    <span class="balance-stat-label">Total purchased</span>
                    <span class="balance-stat-value">1,200</span>
                </div>
                <div class="balance-stat">
                    <span class="balance-stat-label">Spent on subscriptions</span>
                    <span class="balance-stat-value">903</span>
                </div>
                <div class="balance-stat">
                    <span class="balance-stat-label">Tips sent</span>
                    <span class="balance-stat-value">50</span>
                </div>
            </div>
        </div>

        <h2 class="credits-section-title">Buy Credits</h2>
        <div class="credit-packages">
            <div class="credit-pkg" onclick="buyCredits(50, '$4.99')">
                <div class="credit-pkg-amount">50</div>
                <div class="credit-pkg-label">credits</div>
                <div class="credit-pkg-price">$4.99</div>
                <div class="credit-pkg-per">$0.10 / credit</div>
                <button class="credit-pkg-btn">Purchase</button>
            </div>
            <div class="credit-pkg" onclick="buyCredits(100, '$8.99')">
                <div class="credit-pkg-amount">100</div>
                <div class="credit-pkg-label">credits</div>
                <div class="credit-pkg-price">$8.99</div>
                <div class="credit-pkg-per">$0.09 / credit</div>
                <button class="credit-pkg-btn">Purchase</button>
            </div>
            <div class="credit-pkg popular" onclick="buyCredits(250, '$19.99')">
                <div class="credit-pkg-badge">Most Popular</div>
                <div class="credit-pkg-amount">250</div>
                <div class="credit-pkg-label">credits</div>
                <div class="credit-pkg-price">$19.99</div>
                <div class="credit-pkg-per">$0.08 / credit</div>
                <button class="credit-pkg-btn">Purchase</button>
            </div>
            <div class="credit-pkg" onclick="buyCredits(500, '$34.99')">
                <div class="credit-pkg-amount">500</div>
                <div class="credit-pkg-label">credits</div>
                <div class="credit-pkg-price">$34.99</div>
                <div class="credit-pkg-per">$0.07 / credit</div>
                <button class="credit-pkg-btn">Purchase</button>
            </div>
        </div>

        <h2 class="credits-section-title">Transaction History</h2>
        <div class="tx-table-wrap">
            <table class="tx-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th style="text-align:right;">Amount</th>
                    </tr>
                </thead>
                <tbody id="tx-tbody">
                    <!-- Populated by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- ── SETTINGS VIEW ── -->
    <div class="view" id="view-settings">
        <div class="view-header">
            <h1>Settings</h1>
            <p>Manage your account, profile, and preferences.</p>
        </div>

        <div class="settings-sections">
            <!-- Profile -->
            <div class="settings-section">
                <h3 class="settings-section-title">Profile Information</h3>
                <p class="settings-section-desc">Update your personal details and profile picture.</p>

                <div class="settings-avatar-row">
                    <div class="settings-avatar">JD</div>
                    <div class="settings-avatar-actions">
                        <button class="settings-avatar-upload" onclick="showToast('Avatar upload coming soon')">Upload Photo</button>
                        <span class="settings-avatar-hint">JPG, PNG or GIF. Max 5MB.</span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group" style="margin-bottom:0;">
                        <label>Display Name</label>
                        <input type="text" class="form-input" value="John Doe">
                    </div>
                    <div class="form-group" style="margin-bottom:0;">
                        <label>Username</label>
                        <input type="text" class="form-input" value="johndoe" disabled>
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" value="john@example.com">
                </div>
                <div class="form-group" style="margin-bottom:1.5rem;">
                    <label>Bio</label>
                    <input type="text" class="form-input" placeholder="Write a short bio..." value="">
                </div>

                <button class="btn-save" onclick="showToast('Profile saved successfully')">Save Changes</button>
            </div>

            <!-- Password -->
            <div class="settings-section">
                <h3 class="settings-section-title">Change Password</h3>
                <p class="settings-section-desc">Update your password to keep your account secure.</p>

                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" class="form-input" placeholder="Enter current password">
                </div>
                <div class="form-row">
                    <div class="form-group" style="margin-bottom:0;">
                        <label>New Password</label>
                        <input type="password" class="form-input" placeholder="Enter new password">
                    </div>
                    <div class="form-group" style="margin-bottom:0;">
                        <label>Confirm Password</label>
                        <input type="password" class="form-input" placeholder="Confirm new password">
                    </div>
                </div>
                <div style="margin-top:1.25rem;">
                    <button class="btn-save" onclick="showToast('Password updated successfully')">Update Password</button>
                </div>
            </div>

            <!-- Notifications -->
            <div class="settings-section">
                <h3 class="settings-section-title">Notifications</h3>
                <p class="settings-section-desc">Choose which notifications you want to receive.</p>

                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">New content alerts</div>
                        <div class="toggle-desc">Get notified when creators you follow post new content.</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Subscription reminders</div>
                        <div class="toggle-desc">Get reminded before a subscription renews.</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Credit balance alerts</div>
                        <div class="toggle-desc">Get notified when your credit balance is low.</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Promotional emails</div>
                        <div class="toggle-desc">Receive updates about new features and offers.</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>

            <!-- Danger Zone -->
            <div class="settings-section danger-zone">
                <h3 class="settings-section-title">Danger Zone</h3>
                <p class="settings-section-desc">Permanently delete your account and all associated data. This action cannot be undone.</p>

                <button class="btn-danger" onclick="confirmDelete()">Delete Account</button>
            </div>
        </div>
    </div>

</div>

<!-- ══════ TOAST ══════ -->
<div class="toast" id="toast">
    <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
    <span id="toast-msg">Saved!</span>
</div>

<script>
    // ══════ MOCK DATA ══════
    const mockCreators = {
        'alexcreates': { name: 'Alex Creates', handle: '@alexcreates', initials: 'AC' },
        'sophieart': { name: 'Sophie Art', handle: '@sophieart', initials: 'SA' },
        'mikemusic': { name: 'Mike Music', handle: '@mikemusic', initials: 'MM' },
        'emilyfitness': { name: 'Emily Fitness', handle: '@emilyfitness', initials: 'EF' },
        'davecooks': { name: 'Dave Cooks', handle: '@davecooks', initials: 'DC' },
        'linadesign': { name: 'Lina Design', handle: '@linadesign', initials: 'LD' },
    };

    const mockSubscriptions = [
        { name: 'Alex Creates', handle: '@alexcreates', initials: 'AC', tier: 'premium', tierLabel: 'Premium', renewal: 'Mar 15, 2026' },
        { name: 'Sophie Art', handle: '@sophieart', initials: 'SA', tier: 'basic', tierLabel: 'Basic', renewal: 'Mar 3, 2026' },
        { name: 'Mike Music', handle: '@mikemusic', initials: 'MM', tier: 'vip', tierLabel: 'VIP', renewal: 'Apr 1, 2026' },
    ];

    const mockTransactions = [
        { date: 'Feb 12, 2026', type: 'purchase', typeLabel: 'Credit Purchase', desc: '250 credits package', amount: '+250', amountClass: 'positive' },
        { date: 'Feb 10, 2026', type: 'subscription', typeLabel: 'Subscription', desc: '@alexcreates - Premium', amount: '-45', amountClass: 'negative' },
        { date: 'Feb 8, 2026', type: 'tip', typeLabel: 'Tip Sent', desc: '@sophieart', amount: '-10', amountClass: 'negative' },
        { date: 'Feb 5, 2026', type: 'subscription', typeLabel: 'Subscription', desc: '@mikemusic - VIP', amount: '-60', amountClass: 'negative' },
        { date: 'Feb 3, 2026', type: 'subscription', typeLabel: 'Subscription', desc: '@sophieart - Basic', amount: '-15', amountClass: 'negative' },
        { date: 'Jan 29, 2026', type: 'purchase', typeLabel: 'Credit Purchase', desc: '100 credits package', amount: '+100', amountClass: 'positive' },
        { date: 'Jan 25, 2026', type: 'tip', typeLabel: 'Tip Sent', desc: '@alexcreates', amount: '-20', amountClass: 'negative' },
        { date: 'Jan 20, 2026', type: 'purchase', typeLabel: 'Credit Purchase', desc: '500 credits package', amount: '+500', amountClass: 'positive' },
    ];

    let currentCredits = 247;

    // ══════ VIEW SWITCHING ══════
    function switchView(viewName) {
        // Update sidebar
        document.querySelectorAll('.sidebar-item[data-view]').forEach(item => {
            item.classList.toggle('active', item.dataset.view === viewName);
        });

        // Update views
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        const target = document.getElementById('view-' + viewName);
        if (target) target.classList.add('active');

        // Close dropdown
        closeDropdown();
    }

    // ══════ DROPDOWN ══════
    function toggleDropdown() {
        document.getElementById('user-dropdown').classList.toggle('open');
    }
    function closeDropdown() {
        document.getElementById('user-dropdown').classList.remove('open');
    }
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.user-menu')) closeDropdown();
    });

    // ══════ SEARCH ══════
    let searchTimeout;
    document.getElementById('search-input').addEventListener('input', function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(handleSearch, 300);
    });
    document.getElementById('search-input').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') { clearTimeout(searchTimeout); handleSearch(); }
    });

    function handleSearch() {
        const query = document.getElementById('search-input').value.trim().toLowerCase().replace('@', '').replace(/https?:\/\/vaulty\.com\//, '');
        const resultEl = document.getElementById('search-result');
        const emptyEl = document.getElementById('search-empty');

        if (!query) {
            resultEl.classList.remove('show');
            resultEl.innerHTML = '';
            emptyEl.classList.remove('show');
            return;
        }

        // Search through mock creators
        const matches = Object.entries(mockCreators).filter(([key, val]) =>
            key.includes(query) || val.name.toLowerCase().includes(query)
        );

        if (matches.length > 0) {
            emptyEl.classList.remove('show');
            resultEl.innerHTML = matches.map(([key, c]) => `
                <div class="search-result-card" style="margin-bottom: 0.75rem;">
                    <div class="search-result-avatar">${c.initials}</div>
                    <div class="search-result-info">
                        <div class="name">${c.name}</div>
                        <div class="handle">${c.handle}</div>
                    </div>
                    <button class="search-result-action" onclick="showToast('Viewing ${c.name}\\'s profile')">View Profile</button>
                </div>
            `).join('');
            resultEl.classList.add('show');
        } else {
            resultEl.classList.remove('show');
            resultEl.innerHTML = '';
            emptyEl.classList.add('show');
        }
    }

    // ══════ SUBSCRIPTIONS ══════
    function renderSubscriptions() {
        const grid = document.getElementById('subs-grid');
        const empty = document.getElementById('subs-empty');

        if (mockSubscriptions.length === 0) {
            grid.style.display = 'none';
            empty.style.display = 'block';
            return;
        }

        empty.style.display = 'none';
        grid.style.display = 'grid';
        grid.innerHTML = mockSubscriptions.map(sub => `
            <div class="sub-card">
                <div class="sub-card-top">
                    <div class="sub-avatar">${sub.initials}</div>
                    <div class="sub-info">
                        <div class="sub-name">${sub.name}</div>
                        <div class="sub-handle">${sub.handle}</div>
                    </div>
                </div>
                <div class="sub-card-details">
                    <span class="sub-tier ${sub.tier}">${sub.tierLabel}</span>
                    <span class="sub-renewal">Renews <span>${sub.renewal}</span></span>
                </div>
            </div>
        `).join('');
    }

    // ══════ TRANSACTIONS ══════
    function renderTransactions() {
        const tbody = document.getElementById('tx-tbody');
        tbody.innerHTML = mockTransactions.map(tx => `
            <tr>
                <td style="color:var(--dim);">${tx.date}</td>
                <td>
                    <span class="tx-type">
                        <span class="tx-dot ${tx.type}"></span>
                        ${tx.typeLabel}
                    </span>
                </td>
                <td>${tx.desc}</td>
                <td style="text-align:right;" class="tx-amount ${tx.amountClass}">${tx.amount}</td>
            </tr>
        `).join('');
    }

    // ══════ CREDITS ══════
    function updateCreditDisplay() {
        document.getElementById('topbar-credits').textContent = currentCredits.toLocaleString();
        document.getElementById('balance-display').textContent = currentCredits.toLocaleString();
    }

    function buyCredits(amount, price) {
        currentCredits += amount;
        updateCreditDisplay();

        // Add to transaction history
        const now = new Date();
        const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        mockTransactions.unshift({
            date: dateStr,
            type: 'purchase',
            typeLabel: 'Credit Purchase',
            desc: `${amount} credits package`,
            amount: '+' + amount,
            amountClass: 'positive'
        });
        renderTransactions();

        showToast(`Purchased ${amount} credits for ${price}`);
    }

    // ══════ TOAST ══════
    let toastTimer;
    function showToast(msg) {
        const toast = document.getElementById('toast');
        document.getElementById('toast-msg').textContent = msg;
        toast.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ══════ DELETE ACCOUNT ══════
    function confirmDelete() {
        if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
            showToast('Account deletion request submitted');
        }
    }

    // ══════ INIT ══════
    renderSubscriptions();
    renderTransactions();
</script>

</body>
</html>